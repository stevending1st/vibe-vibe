---
title: "5.4.4 代码优化"
order: 5
---


![05-advanced_5.4-iteration_5.4.4-optimize.png](../../../public/images/Basic/05-advanced_5.4-iteration_5.4.4-optimize.png)
# 5.4.4 代码优化：让 AI 帮你改进代码质量

经过本节学习，你将掌握：
- 什么时候该优化代码
- 让 AI 帮你做的 5 类优化
- 代码审查的基本意识

## 什么时候该优化

先说一个重要原则：

**功能稳定之后再优化，不要边写功能边优化。**

为什么？

因为你还在加功能的时候，代码会频繁变动。这时候花时间整理代码，可能下一个功能又要重新改。

等待办清单的核心功能都做完、测试通过了，再考虑优化。

优化的目的是：
- 让代码更容易读懂（以后你自己回来看也能看懂）
- 减少潜在的问题
- 让代码运行得更快（对于小项目，这通常不是重点）

## 让 AI 帮你做的 5 类优化

你不需要自己会写更好的代码，可以让 AI 帮你检查和改进。

### 1. 检查代码重复

```
请检查我的代码，有没有重复的逻辑？
如果有，请帮我提取成一个可复用的函数。

[粘贴你的代码]
```

**为什么重要**：重复的代码意味着，如果要改某个逻辑，你需要改多处。容易漏改，产生 bug。

### 2. 改进变量命名

```
请检查我的代码中的变量和函数命名，有没有不够清晰的？
请给出改进建议，让代码更容易读懂。

[粘贴你的代码]
```

**例子**：

| 改进前 | 改进后 | 原因 |
|--------|--------|------|
| `a`, `b`, `x` | `taskName`, `dueDate` | 有意义的名字，一看就知道是什么 |
| `data` | `todoList` | 更具体 |
| `fn1` | `addNewTask` | 描述了函数的功能 |

### 3. 添加中文注释

```
请给这段代码添加中文注释，解释：
1. 每个函数是做什么的
2. 关键的代码块在处理什么逻辑
3. 不容易理解的地方

[粘贴你的代码]
```

**为什么重要**：一个月后你再看自己的代码，没有注释的话可能完全看不懂。注释是写给未来的自己的。

### 4. 检查潜在 bug

```
请检查我的代码，有没有潜在的问题或 bug？
特别关注：
1. 可能导致报错的边界情况
2. 数据为空时的处理
3. 用户输入的验证

[粘贴你的代码]
```

**常见问题举例**：
- 用户没输入就点了添加按钮
- 任务列表为空时的显示
- 数据格式不对时的处理

### 5. 性能优化建议

```
请检查我的代码，有没有可以优化性能的地方？
我的项目是一个待办清单，数据量不大（最多几十条任务）。
请只给出对我这个规模有意义的优化建议。

[粘贴你的代码]
```

**对于小项目的说明**：对于待办清单这样的小项目，性能通常不是问题。不要过度优化。如果 AI 给了很复杂的优化建议，可以先不做。

## 一个完整的代码审查 Prompt

如果你想让 AI 做一次全面的代码审查，可以用这个模板：

```
请帮我审查这段代码，从以下几个角度给出改进建议：

1. 代码结构：有没有重复的逻辑？可以怎么简化？
2. 可读性：变量命名是否清晰？需要添加注释吗？
3. 健壮性：有没有可能报错的边界情况？
4. 安全性：有没有明显的安全问题？

请按优先级排序你的建议（先说最重要的），并给出具体的修改方案。

代码如下：
[粘贴你的代码]
```

## 代码审查的基本意识

在 5.3 节我们提到过，AI 生成的代码并不总是安全的。

根据 Veracode 2025 年的报告，**45% 的 AI 生成代码未通过安全测试**。

这不是说 AI 不好用，而是说：**你需要对 AI 给的代码有基本的审查意识**。

### 审查时关注这几点

| 关注点 | 检查内容 |
|--------|---------|
| 数据安全 | 代码里有没有暴露敏感信息（密码、API密钥） |
| 输入验证 | 用户输入的数据有没有做检查 |
| 错误处理 | 出错时会不会崩溃，有没有给用户提示 |
| 功能正确 | AI 实现的逻辑和你的预期是否一致 |

如果看不太懂代码也没关系。至少做到：
- **运行测试一下**，看功能是否正常
- **看看关键部分**，比如处理用户输入的地方
- **有疑问就问 AI**："这段代码是在做什么？有没有问题？"

## 优化不等于重写

最后一个重要提醒：

**优化是在现有代码基础上小步改进，不是推翻重来。**

如果 AI 建议你"用某某框架重写整个项目"，这通常不是你现在需要做的。

对于学习阶段的项目，保持现有的代码能工作就好。等你做更多项目、积累更多经验后，自然会知道什么时候该用更好的方案。

## 本节检查清单

- <input type="checkbox" name="本节检查清单-checklist" value="核心功能稳定后再考虑优化" /> <label for="核心功能稳定后再考虑优化">核心功能稳定后再考虑优化</label>
- <input type="checkbox" name="本节检查清单-checklist" value="让-ai-检查了代码重复问题" /> <label for="让-ai-检查了代码重复问题">让 AI 检查了代码重复问题</label>
- <input type="checkbox" name="本节检查清单-checklist" value="让-ai-改进了变量命名" /> <label for="让-ai-改进了变量命名">让 AI 改进了变量命名</label>
- <input type="checkbox" name="本节检查清单-checklist" value="给关键代码添加了中文注释" /> <label for="给关键代码添加了中文注释">给关键代码添加了中文注释</label>
- <input type="checkbox" name="本节检查清单-checklist" value="对-ai-生成的代码有了基本的审查意识" /> <label for="对-ai-生成的代码有了基本的审查意识">对 AI 生成的代码有了基本的审查意识</label>

::: tip 代码是给人读的
写代码不只是让程序能运行。

好的代码，别人（包括未来的你）能快速读懂。

注释和清晰的命名，是对未来自己的善意。
:::

→ [5.4.5 从项目到作品集](./5.4.5-portfolio.md)
